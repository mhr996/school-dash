'use client';
import React, { useEffect, useState } from 'react';
import { useSelector } from 'react-redux';
import { IRootState } from '@/store';
import supabase from '@/lib/supabase';
import { getTranslation } from '@/i18n';
import TripPlannerDashboard from '@/components/dashboards/trip-planner-dashboard';
import AdminDashboard from '@/components/dashboards/admin-dashboard';

const HomePage = () => {
    const { t } = getTranslation();
    const [dashboardView, setDashboardView] = useState<'admin' | 'trip-planner'>('admin');
    const [isAdminUser, setIsAdminUser] = useState(false);
    const [loading, setLoading] = useState(true);

    // Check if user is admin
    useEffect(() => {
        const checkUserRole = async () => {
            try {
                const {
                    data: { user },
                } = await supabase.auth.getUser();
                if (!user) {
                    setLoading(false);
                    return;
                }

                const { data: userData } = await supabase.from('users').select('role_id, roles(name)').eq('id', user.id).single();

                if (userData?.roles?.name === 'admin') {
                    setIsAdminUser(true);
                }
            } catch (error) {
                console.error('Error checking user role:', error);
            } finally {
                setLoading(false);
            }
        };

        checkUserRole();
    }, []);

    if (loading) {
        return (
            <div className="flex items-center justify-center min-h-screen">
                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
            </div>
        );
    }

    return (
        <div className="relative">
            {/* Dashboard Switcher - Only show for admin users */}
            {isAdminUser && (
                <div className="sticky top-0 z-40 bg-white dark:bg-[#0e1726] border-b border-gray-200 dark:border-gray-700 mb-6 shadow-sm">
                    <div className="max-w-[1500px] mx-auto px-6 py-4">
                        <div className="flex items-center justify-between gap-4 flex-wrap">
                            <div className="flex items-center gap-3">
                                <h2 className="text-lg font-semibold text-gray-800 dark:text-white">{dashboardView === 'admin' ? t('admin_dashboard') : t('trip_planner_dashboard')}</h2>
                                <span className="px-2.5 py-1 text-xs font-medium rounded-full bg-primary/10 text-primary">{isAdminUser ? 'Admin' : 'User'}</span>
                            </div>

                            {/* Toggle Buttons */}
                            <div className="flex gap-2 bg-gray-100 dark:bg-gray-800 rounded-lg p-1">
                                <button
                                    onClick={() => setDashboardView('admin')}
                                    className={`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${
                                        dashboardView === 'admin'
                                            ? 'bg-white dark:bg-gray-700 text-primary shadow-md'
                                            : 'text-gray-600 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-700/50'
                                    }`}
                                >
                                    {t('admin_dashboard')}
                                </button>
                                <button
                                    onClick={() => setDashboardView('trip-planner')}
                                    className={`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${
                                        dashboardView === 'trip-planner'
                                            ? 'bg-white dark:bg-gray-700 text-primary shadow-md'
                                            : 'text-gray-600 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-700/50'
                                    }`}
                                >
                                    {t('trip_planner_dashboard')}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            )}

            {/* Conditionally render dashboards */}
            {dashboardView === 'admin' && isAdminUser ? <AdminDashboard /> : <TripPlannerDashboard />}
        </div>
    );
};

export default HomePage;

// Dynamically import ReactApexChart with SSR disabled
const ReactApexChart = dynamic(() => import('react-apexcharts'), {
    ssr: false,
    loading: () => (
        <div className="h-[200px] flex items-center justify-center animate-pulse bg-gray-200 dark:bg-gray-700 rounded">
            <div className="h-4 bg-gray-300 dark:bg-gray-600 rounded w-32 animate-pulse"></div>
        </div>
    ),
});

// Icons
import IconCar from '@/components/icon/icon-car';
import IconTrendingUp from '@/components/icon/icon-trending-up';
import IconTrendingDown from '@/components/icon/icon-trending-down';
import IconMenuInvoice from '@/components/icon/menu/icon-menu-invoice';
import IconUsersGroup from '@/components/icon/icon-users-group';
import IconDollarSign from '@/components/icon/icon-dollar-sign';
import IconEye from '@/components/icon/icon-eye';
import IconPlus from '@/components/icon/icon-plus';
import IconCreditCard from '@/components/icon/icon-credit-card';
import IconCash from '@/components/icon/icon-cash-banknotes';
import IconSettings from '@/components/icon/icon-settings';
import IconUser from '@/components/icon/icon-user';
import IconClipboardText from '@/components/icon/icon-clipboard-text';
import IconShoppingCart from '@/components/icon/icon-shopping-cart';
import IconBox from '@/components/icon/icon-box';
import IconStore from '@/components/icon/icon-store';
import IconHorizontalDots from '@/components/icon/icon-horizontal-dots';
import IconMenuCharts from '@/components/icon/menu/icon-menu-charts';
import IconMenuComponents from '@/components/icon/menu/icon-menu-components';
import IconMenuNotes from '@/components/icon/menu/icon-menu-notes';

interface DashboardStats {
    totalCars: number;
    totalDeals: number;
    totalCustomers: number;
    totalProviders: number;
    totalRevenue: number;
    monthlyRevenue: number;
    totalCarsSalePrice: number;
    carsGrowth: number;
    dealsGrowth: number;
    customersGrowth: number;
    revenueGrowth: number;
    loading: boolean;
    chartData: {
        months: string[];
        sales: number[];
        deals: number[];
        revenue: number[];
    };
    recentActivity: any[];
    dealsByType: { [key: string]: number };
    carsByStatus: { [key: string]: number };
}

type TimeFilter = 'week' | 'month' | 'year' | 'all';

const HomePage = () => {
    const isDark = useSelector((state: IRootState) => state.themeConfig.theme === 'dark' || state.themeConfig.isDarkMode);
    const isRtl = useSelector((state: IRootState) => state.themeConfig.rtlClass) === 'rtl';
    const [isMounted, setIsMounted] = useState(false);
    const [timeFilter, setTimeFilter] = useState<TimeFilter>('month');
    const { t } = getTranslation();

    const [stats, setStats] = useState<DashboardStats>({
        totalCars: 0,
        totalDeals: 0,
        totalCustomers: 0,
        totalProviders: 0,
        totalRevenue: 0,
        monthlyRevenue: 0,
        totalCarsSalePrice: 0,
        carsGrowth: 0,
        dealsGrowth: 0,
        customersGrowth: 0,
        revenueGrowth: 0,
        loading: true,
        chartData: {
            months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            sales: [0, 0, 0, 0, 0, 0],
            deals: [0, 0, 0, 0, 0, 0],
            revenue: [0, 0, 0, 0, 0, 0],
        },
        recentActivity: [],
        dealsByType: {},
        carsByStatus: {},
    });

    // Set is mounted for client-side rendering of charts
    useEffect(() => {
        setIsMounted(true);
    }, []);

    // Calculate growth percentage
    const calculateGrowth = (current: number, previous: number) => {
        if (previous === 0) return current > 0 ? 100 : 0;
        return ((current - previous) / previous) * 100;
    };

    // Get date range based on filter
    const getDateRange = (filter: TimeFilter) => {
        const now = new Date();
        let startDate: Date;
        let previousStartDate: Date;
        let previousEndDate: Date;

        switch (filter) {
            case 'week':
                // Current week (Sunday to Saturday)
                const currentDayOfWeek = now.getDay();
                startDate = new Date(now);
                startDate.setDate(now.getDate() - currentDayOfWeek);
                startDate.setHours(0, 0, 0, 0);

                // Previous week
                previousStartDate = new Date(startDate);
                previousStartDate.setDate(startDate.getDate() - 7);
                previousEndDate = new Date(startDate);
                break;

            case 'month':
                // Current month
                startDate = new Date(now.getFullYear(), now.getMonth(), 1);

                // Previous month
                previousStartDate = new Date(now.getFullYear(), now.getMonth() - 1, 1);
                previousEndDate = new Date(startDate);
                break;

            case 'year':
                // Current year
                startDate = new Date(now.getFullYear(), 0, 1);

                // Previous year
                previousStartDate = new Date(now.getFullYear() - 1, 0, 1);
                previousEndDate = new Date(startDate);
                break;

            case 'all':
            default:
                // All time - use a very old date
                startDate = new Date('2000-01-01');
                previousStartDate = new Date('2000-01-01');
                previousEndDate = new Date('2000-01-01');
                break;
        }

        return {
            currentStart: startDate,
            previousStart: previousStartDate,
            previousEnd: previousEndDate,
        };
    };

    useEffect(() => {
        const fetchDashboardStats = async () => {
            try {
                setStats((prev) => ({ ...prev, loading: true }));

                // Get date ranges based on current filter
                const { currentStart, previousStart, previousEnd } = getDateRange(timeFilter);

                // Consolidate all database queries into fewer parallel calls
                const sixMonthsAgo = new Date(new Date().getFullYear(), new Date().getMonth() - 5, 1);

                const [
                    // Current period counts
                    carsResult,
                    dealsResult,
                    customersResult,
                    providersResult,
                    // Previous period counts (for growth calculation)
                    previousCarsResult,
                    previousDealsResult,
                    previousCustomersResult,
                    // Revenue data
                    { data: revenueData },
                    { data: previousRevenueData },
                    // Total cars sale price
                    { data: carsWithSalePrices },
                    // Chart data (all in single queries)
                    { data: allDealsForChart },
                    { data: allCarsForChart },
                    { data: allRevenueForChart },
                    // Additional data
                    { data: dealTypesData },
                    { data: carStatusData },
                    { data: recentActivity },
                ] = await Promise.all([
                    // Current period queries
                    timeFilter === 'all'
                        ? supabase.from('cars').select('*', { count: 'exact', head: true })
                        : supabase.from('cars').select('*', { count: 'exact', head: true }).gte('created_at', currentStart.toISOString()),

                    timeFilter === 'all'
                        ? supabase.from('deals').select('*', { count: 'exact', head: true })
                        : supabase.from('deals').select('*', { count: 'exact', head: true }).gte('created_at', currentStart.toISOString()),

                    timeFilter === 'all'
                        ? supabase.from('customers').select('*', { count: 'exact', head: true })
                        : supabase.from('customers').select('*', { count: 'exact', head: true }).gte('created_at', currentStart.toISOString()),

                    timeFilter === 'all'
                        ? supabase.from('providers').select('*', { count: 'exact', head: true })
                        : supabase.from('providers').select('*', { count: 'exact', head: true }).gte('created_at', currentStart.toISOString()),

                    // Previous period queries (only if not 'all')
                    timeFilter === 'all'
                        ? Promise.resolve({ count: 0 })
                        : supabase.from('cars').select('*', { count: 'exact', head: true }).gte('created_at', previousStart.toISOString()).lt('created_at', previousEnd.toISOString()),

                    timeFilter === 'all'
                        ? Promise.resolve({ count: 0 })
                        : supabase.from('deals').select('*', { count: 'exact', head: true }).gte('created_at', previousStart.toISOString()).lt('created_at', previousEnd.toISOString()),

                    timeFilter === 'all'
                        ? Promise.resolve({ count: 0 })
                        : supabase.from('customers').select('*', { count: 'exact', head: true }).gte('created_at', previousStart.toISOString()).lt('created_at', previousEnd.toISOString()),

                    // Revenue queries
                    timeFilter === 'all'
                        ? supabase.from('deals').select('amount, created_at').not('amount', 'is', null)
                        : supabase.from('deals').select('amount, created_at').not('amount', 'is', null).gte('created_at', currentStart.toISOString()),

                    timeFilter === 'all'
                        ? Promise.resolve({ data: [] })
                        : supabase.from('deals').select('amount').gte('created_at', previousStart.toISOString()).lt('created_at', previousEnd.toISOString()).not('amount', 'is', null),

                    // Total cars sale price (all cars regardless of date filter)
                    supabase.from('cars').select('sale_price').not('sale_price', 'is', null),

                    // Chart data queries (last 6 months)
                    supabase.from('deals').select('created_at').gte('created_at', sixMonthsAgo.toISOString()),
                    supabase.from('cars').select('created_at').gte('created_at', sixMonthsAgo.toISOString()),
                    supabase.from('deals').select('amount, created_at').gte('created_at', sixMonthsAgo.toISOString()).not('amount', 'is', null),

                    // Deals by type
                    timeFilter === 'all' ? supabase.from('deals').select('deal_type') : supabase.from('deals').select('deal_type').gte('created_at', currentStart.toISOString()),

                    // Cars by status
                    timeFilter === 'all' ? supabase.from('cars').select('status') : supabase.from('cars').select('status').gte('created_at', currentStart.toISOString()),

                    // Recent activity
                    supabase.from('logs').select('*').order('created_at', { ascending: false }).limit(10),
                ]);

                // Process results
                const totalCars = carsResult.count || 0;
                const totalDeals = dealsResult.count || 0;
                const totalCustomers = customersResult.count || 0;
                const totalProviders = providersResult.count || 0;

                const previousCars = previousCarsResult.count || 0;
                const previousDeals = previousDealsResult.count || 0;
                const previousCustomers = previousCustomersResult.count || 0;

                const totalRevenue = revenueData?.reduce((sum, deal) => sum + (deal.amount || 0), 0) || 0;
                const monthlyRevenue = totalRevenue;
                const previousMonthRevenue = previousRevenueData?.reduce((sum, deal) => sum + (deal.amount || 0), 0) || 0;
                const totalCarsSalePrice = carsWithSalePrices?.reduce((sum, car) => sum + (car.sale_price || 0), 0) || 0;

                // Calculate growth rates
                const carsGrowth = timeFilter === 'all' ? 0 : calculateGrowth(totalCars || 0, previousCars || 0);
                const dealsGrowth = timeFilter === 'all' ? 0 : calculateGrowth(totalDeals || 0, previousDeals || 0);
                const customersGrowth = timeFilter === 'all' ? 0 : calculateGrowth(totalCustomers || 0, previousCustomers || 0);
                const revenueGrowth = timeFilter === 'all' ? 0 : calculateGrowth(monthlyRevenue, previousMonthRevenue);

                // Process chart data efficiently in memory from already fetched data
                const now = new Date();
                const chartMonths = [];
                const chartSales = [];
                const chartDeals = [];
                const chartRevenue = [];

                for (let i = 5; i >= 0; i--) {
                    const month = new Date(now.getFullYear(), now.getMonth() - i, 1);
                    const nextMonth = new Date(now.getFullYear(), now.getMonth() - i + 1, 1);

                    chartMonths.push(month.toLocaleDateString('en-US', { month: 'short' }));

                    // Count items for this month from already fetched data
                    const monthDeals = (allDealsForChart || []).filter((deal) => {
                        const dealDate = new Date(deal.created_at);
                        return dealDate >= month && dealDate < nextMonth;
                    }).length;

                    const monthCars = (allCarsForChart || []).filter((car) => {
                        const carDate = new Date(car.created_at);
                        return carDate >= month && carDate < nextMonth;
                    }).length;

                    const monthRevenueTotal = (allRevenueForChart || [])
                        .filter((deal) => {
                            const dealDate = new Date(deal.created_at);
                            return dealDate >= month && dealDate < nextMonth;
                        })
                        .reduce((sum, deal) => sum + (deal.amount || 0), 0);

                    chartDeals.push(monthDeals);
                    chartSales.push(monthCars);
                    chartRevenue.push(monthRevenueTotal);
                }

                // Process deals by type
                const dealsByType: { [key: string]: number } = {};
                (dealTypesData || []).forEach((deal) => {
                    dealsByType[deal.deal_type] = (dealsByType[deal.deal_type] || 0) + 1;
                });

                // Process cars by status
                const carsByStatus: { [key: string]: number } = {};
                (carStatusData || []).forEach((car) => {
                    carsByStatus[car.status] = (carsByStatus[car.status] || 0) + 1;
                });

                setStats({
                    totalCars: totalCars || 0,
                    totalDeals: totalDeals || 0,
                    totalCustomers: totalCustomers || 0,
                    totalProviders: totalProviders || 0,
                    totalRevenue,
                    monthlyRevenue,
                    totalCarsSalePrice,
                    carsGrowth,
                    dealsGrowth,
                    customersGrowth,
                    revenueGrowth,
                    loading: false,
                    chartData: {
                        months: chartMonths,
                        sales: chartSales,
                        deals: chartDeals,
                        revenue: chartRevenue,
                    },
                    recentActivity: recentActivity || [],
                    dealsByType,
                    carsByStatus,
                });
            } catch (error) {
                console.error('Error fetching dashboard stats:', error);
                setStats((prev) => ({ ...prev, loading: false }));
            }
        };

        fetchDashboardStats();
    }, [timeFilter]);

    // Format currency
    const formatCurrency = (value: number) => {
        return new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'ILS',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0,
        }).format(value);
    };

    // Format large numbers
    const formatNumber = (value: number) => {
        if (value >= 1000000) {
            return (value / 1000000).toFixed(0) + 'M';
        } else if (value >= 1000) {
            return (value / 1000).toFixed(0) + 'K';
        }
        return value.toString();
    };

    // Get growth indicator
    const getGrowthIndicator = (growth: number) => {
        if (growth > 0) {
            return {
                icon: <IconTrendingUp className="w-4 h-4" />,
                color: 'text-success',
                bgColor: 'bg-success-light',
            };
        } else if (growth < 0) {
            return {
                icon: <IconTrendingDown className="w-4 h-4" />,
                color: 'text-danger',
                bgColor: 'bg-danger-light',
            };
        }
        return {
            icon: <IconTrendingUp className="w-4 h-4" />,
            color: 'text-secondary',
            bgColor: 'bg-secondary-light',
        };
    };

    // Chart configurations
    const salesChart = {
        series: [
            {
                name: t('cars_added'),
                data: stats.chartData.sales,
            },
            {
                name: t('deals_closed'),
                data: stats.chartData.deals,
            },
        ],
        options: {
            chart: {
                height: 325,
                type: 'area' as const,
                fontFamily: 'Nunito, sans-serif',
                zoom: {
                    enabled: false,
                },
                toolbar: {
                    show: false,
                },
            },
            dataLabels: {
                enabled: false,
            },
            stroke: {
                show: true,
                curve: 'smooth' as const,
                width: 2,
                lineCap: 'square' as const,
            },
            dropShadow: {
                enabled: true,
                opacity: 0.2,
                blur: 10,
                left: -7,
                top: 22,
            },
            colors: isDark ? ['#2196F3', '#E7515A'] : ['#1B55E2', '#E7515A'],
            markers: {
                discrete: [
                    {
                        seriesIndex: 0,
                        dataPointIndex: 6,
                        fillColor: '#1B55E2',
                        strokeColor: 'transparent',
                        size: 7,
                    },
                    {
                        seriesIndex: 1,
                        dataPointIndex: 5,
                        fillColor: '#E7515A',
                        strokeColor: 'transparent',
                        size: 7,
                    },
                ],
            },
            labels: stats.chartData.months,
            xaxis: {
                axisBorder: {
                    show: false,
                },
                axisTicks: {
                    show: false,
                },
                crosshairs: {
                    show: true,
                },
                labels: {
                    offsetX: isRtl ? 2 : 0,
                    offsetY: 5,
                    style: {
                        fontSize: '12px',
                        cssClass: 'apexcharts-xaxis-title',
                    },
                },
            },
            yaxis: {
                tickAmount: 7,
                labels: {
                    formatter: (value: number) => {
                        return formatNumber(value);
                    },
                    offsetX: isRtl ? -30 : -10,
                    offsetY: 0,
                    style: {
                        fontSize: '12px',
                        cssClass: 'apexcharts-yaxis-title',
                    },
                },
                opposite: isRtl ? true : false,
            },
            grid: {
                borderColor: isDark ? '#191E3A' : '#E0E6ED',
                strokeDashArray: 5,
                xaxis: {
                    lines: {
                        show: true,
                    },
                },
                yaxis: {
                    lines: {
                        show: false,
                    },
                },
                padding: {
                    top: 0,
                    right: 0,
                    bottom: 0,
                    left: 0,
                },
            },
            legend: {
                position: 'top' as const,
                horizontalAlign: 'right' as const,
                fontSize: '16px',
                markers: {
                    width: 10,
                    height: 10,
                    offsetX: -2,
                },
                itemMargin: {
                    horizontal: 10,
                    vertical: 5,
                },
            },
            tooltip: {
                marker: {
                    show: true,
                },
                x: {
                    show: false,
                },
            },
            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 1,
                    inverseColors: !1,
                    opacityFrom: isDark ? 0.19 : 0.28,
                    opacityTo: 0.05,
                    stops: isDark ? [100, 100] : [45, 100],
                },
            },
        },
    };

    const revenueChart = {
        series: [
            {
                name: t('revenue'),
                data: stats.chartData.revenue,
            },
        ],
        options: {
            chart: {
                height: 300,
                type: 'line' as const,
                fontFamily: 'Nunito, sans-serif',
                toolbar: {
                    show: false,
                },
            },
            colors: ['#00AB55'],
            stroke: {
                curve: 'smooth' as const,
                width: 2,
            },
            xaxis: {
                categories: stats.chartData.months,
            },
            yaxis: {
                labels: {
                    formatter: (value: number) => formatCurrency(value),
                },
            },
            tooltip: {
                y: {
                    formatter: (value: number) => formatCurrency(value),
                },
            },
        },
    };

    const dealTypeChart = {
        series: Object.values(stats.dealsByType),
        options: {
            chart: {
                height: 300,
                type: 'donut' as const,
                fontFamily: 'Almarai, sans-serif',
            },
            labels: Object.keys(stats.dealsByType).map((type) => t(`deal_type_${type}`)),
            colors: ['#4361EE', '#805DCA', '#00AB55', '#E7515A', '#E2A03F', '#2196F3'],
            responsive: [
                {
                    breakpoint: 480,
                    options: {
                        chart: {
                            width: 200,
                        },
                        legend: {
                            position: 'bottom' as const,
                        },
                    },
                },
            ],
            stroke: {
                show: false,
            },
            legend: {
                position: 'bottom' as const,
            },
        },
    };

    // if (stats.loading) {
    //     return (
    //         <div className="pt-5 max-w-[1500px]">
    //             <div className="mb-6 flex flex-wrap items-center justify-between gap-4">
    //                 <div>
    //                     <h1 className="text-2xl font-bold text-black dark:text-white">{t('dashboard')}</h1>
    //                     <p className="text-sm text-gray-500 dark:text-gray-400 mt-1">{t('overview_analytics')}</p>
    //                 </div>
    //                 <div className="flex gap-2 bg-white dark:bg-[#1b2e4b] rounded-lg p-1 border border-gray-200 dark:border-gray-600">
    //                     {(['week', 'month', 'year', 'all'] as TimeFilter[]).map((filter) => (
    //                         <button
    //                             key={filter}
    //                             onClick={() => setTimeFilter(filter)}
    //                             className={`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${
    //                                 timeFilter === filter ? 'bg-primary text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
    //                             }`}
    //                         >
    //                             {t(`time_filter_${filter}`)}
    //                         </button>
    //                     ))}
    //                 </div>
    //             </div>
    //             <div className="space-y-6">
    //                 {/* Loading skeleton for summary cards */}
    //                 <div className="mb-6 grid gap-5 sm:grid-cols-2 xl:grid-cols-4">
    //                     {[1, 2, 3, 4].map((i) => (
    //                         <div key={i} className="panel">
    //                             <div className="flex items-center justify-between mb-5">
    //                                 <div className="h-4 bg-gray-300/60 dark:bg-gray-700 rounded w-24 animate-pulse"></div>
    //                                 <div className="h-5 bg-gray-300/60 dark:bg-gray-700 rounded w-12 animate-pulse"></div>
    //                             </div>
    //                             <div className="mb-5">
    //                                 <div className="h-7 bg-gray-400/60 dark:bg-gray-600 rounded w-16 animate-pulse"></div>
    //                             </div>
    //                             <div className="flex items-center gap-2">
    //                                 <div className="h-4 w-4 bg-gray-300/60 dark:bg-gray-700 rounded mr-2 animate-pulse"></div>
    //                                 <div className="h-3 bg-gray-300/60 dark:bg-gray-700 rounded w-20 animate-pulse"></div>
    //                             </div>
    //                         </div>
    //                     ))}
    //                 </div>

    //                 {/* Loading skeleton for deals by type and quick actions */}
    //                 <div className="grid grid-cols-1 gap-6 lg:grid-cols-3">
    //                     {/* Deals by type skeleton */}
    //                     <div className="panel">
    //                         <div className="mb-5">
    //                             <div className="h-5 bg-gray-300/60 dark:bg-gray-700 rounded w-24 animate-pulse"></div>
    //                         </div>
    //                         <div className="flex justify-center">
    //                             <div className="h-64 w-64 bg-gray-300/60 dark:bg-gray-700 rounded-full animate-pulse"></div>
    //                         </div>
    //                     </div>

    //                     {/* Quick actions skeleton */}
    //                     <div className="panel lg:col-span-2">
    //                         <div className="mb-5">
    //                             <div className="h-5 bg-gray-300/60 dark:bg-gray-700 rounded w-20 animate-pulse"></div>
    //                         </div>
    //                         <div className="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    //                             {[1, 2, 3, 4].map((i) => (
    //                                 <div key={i} className="flex flex-col items-center rounded-md border border-gray-200 dark:border-gray-600 p-4">
    //                                     <div className="h-12 w-12 bg-gray-300/60 dark:bg-gray-700 rounded-lg mb-3 animate-pulse"></div>
    //                                     <div className="h-4 bg-gray-300/60 dark:bg-gray-700 rounded w-16 mb-2 animate-pulse"></div>
    //                                     <div className="h-3 bg-gray-300/60 dark:bg-gray-700 rounded w-20 animate-pulse"></div>
    //                                 </div>
    //                             ))}
    //                         </div>
    //                         <div className="mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2">
    //                             {[1, 2, 3, 4].map((i) => (
    //                                 <div key={i} className="flex items-center rounded-md border border-gray-200 dark:border-gray-600 p-4 gap-2">
    //                                     <div className="h-12 w-12 bg-gray-300/60 dark:bg-gray-700 rounded-lg mr-4 animate-pulse"></div>
    //                                     <div className="flex-1">
    //                                         <div className="h-4 bg-gray-300/60 dark:bg-gray-700 rounded w-20 mb-2 animate-pulse"></div>
    //                                         <div className="h-3 bg-gray-300/60 dark:bg-gray-700 rounded w-24 animate-pulse"></div>
    //                                     </div>
    //                                 </div>
    //                             ))}
    //                         </div>
    //                     </div>
    //                 </div>

    //                 {/* Loading skeleton for charts */}
    //                 <div className="grid grid-cols-1 gap-6 lg:grid-cols-2">
    //                     {[1, 2].map((i) => (
    //                         <div key={i} className="panel">
    //                             <div className="mb-5">
    //                                 <div className="h-5 bg-gray-300/60 dark:bg-gray-700 rounded w-28 animate-pulse"></div>
    //                             </div>
    //                             <div className="h-64 bg-gray-300/60 dark:bg-gray-700 rounded animate-pulse"></div>
    //                         </div>
    //                     ))}
    //                 </div>
    //             </div>
    //         </div>
    //     );
    // }

    return (
        <>
            <TripPlannerDashboard />
        </>
    );
};

export default HomePage;
